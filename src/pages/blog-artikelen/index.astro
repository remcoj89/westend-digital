---
// Astro assets
import { Image } from "astro:assets";

// Layout
import Layout from "../../layouts/Layout.astro";

// Sections
import CtaSection from "../../sections/CtaSection.astro";
import FooterSection from "../../sections/FooterSection.astro";

// Components
import Button from "../../components/Button.astro";
import Card from "../../components/Card.astro";
import CardGrid from "../../components/CardGrid.astro";
import Header from "../../components/Header.astro";

// pageData
import fetchBlogArticles from "../../lib/fetchBlogArticles";
import pageData from "../../data/blog.json";

const blogs = await fetchBlogArticles();

const { metaTitle, metaDescription, ogImage, ogUrl, heroTitle } =
  pageData.pageContent;
---

<Layout
  title={metaTitle}
  description={metaDescription}
  ogTitle={metaTitle}
  ogDescription={metaDescription}
  ogImageUrl={ogImage.ogImageUrl}
  ogImageAlt={ogImage.ogImageAlt}
  ogUrl={ogUrl}
>
  <Header>
    <div>
      <h1>{heroTitle}</h1>
    </div>
  </Header>

  <section class="wrapper">
    <CardGrid>
      {
        blogs.map((blog) => (
          <a href={`/blog-artikelen/${blog.node.slug}`} class="hidden blog">
            <Card cardStyle="list-card">
              <Image
                src={blog.node.featuredImage.node.mediaItemUrl}
                width={500}
                height={500}
                alt={blog.node.featuredImage.node.altText}
              />
              <div class="card-info">
                <h2 class="card-title">{blog.node.title}</h2>
                <div set:html={blog.node.excerpt} />
                <Button>Lees meer</Button>
              </div>
            </Card>
          </a>
        ))
      }
    </CardGrid>
  </section>
  <CtaSection />
  <FooterSection />
</Layout>
