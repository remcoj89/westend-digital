---
import Layout from "../../layouts/Layout.astro";
import { Image } from "astro:assets";

// Components
import ButtonWrapper from "../../components/ButtonWrapper.astro";
import WebpConverterComponent from "../../components/toolsComponent/WebpConverter.astro";
import Footer from "../../sections/FooterSection.astro";

// Sections
import BeforeAndAfterSection from "../../sections/WebpConverterPageSections/BeforeAndAfterSection.astro";
import CtaSection from "../../sections/WebpConverterPageSections/CtaSection.astro";
import FaqSection from "../../sections/SharedSections/FaqSection.astro";
import FinalCtaSection from "../../sections/WebpConverterPageSections/FinalCtaSection.astro";
import HowItWorksSection from "../../sections/SharedSections/HowItWorksSection.astro";
import OptimalImageSection from "../../sections/WebpConverterPageSections/OptimalImageSection.astro";

// Data & Schemas
import pageData from "../../data/imageToWebpConverter.json";
import SchemaHead from "../../components/SchemaHead.astro";
import { webpSchemas } from "../../schemas/tools/webp-converter.js";

const {
  beforeAndAfterSection,
  callToActionSection,
  ctaSection,
  faqSection,
  heroImage,
  heroSubtitle,
  heroTitle,
  howItWorksSection,
  metaDescription,
  metaTitle,
  ogImage,
  ogSiteName,
  ogUrl,
  optimalImageSizesSection,
  secondCtaSection,
} = pageData.pageContent;
---

<Layout
  description={metaDescription}
  ogDescription={metaDescription}
  ogImageAlt={ogImage.ogImageAlt}
  ogImageUrl={ogImage.ogImageUrl}
  ogSiteName={ogSiteName}
  ogTitle={metaTitle}
  ogUrl={ogUrl}
  title={metaTitle}
>
  <Fragment slot="head">
    <SchemaHead items={webpSchemas} />
  </Fragment>

  <header class="wrapper">
    <div class="hero-copy">
      <!-- Hero: abstracte conversie‑illustratie (+ micro‑badge “gratis”). Alt‑tekst + lazy‑load. -->
      <h1 class="margin-bottom-1">
        {heroTitle}
      </h1>
      <p class="margin-bottom-2">
        {heroSubtitle}
      </p>
      <ButtonWrapper>
        <a href="#webp-converter" class="btn btn-secondary">Start nu gratis</a>
        <a
          href="#webp-converter-how-it-work-section"
          class="btn btn-secondary-open">Hoe het werkt</a
        >
      </ButtonWrapper>
    </div>
    <picture class="converter-tool-hero-image">
      <Image
        alt={heroImage.altText}
        src={heroImage.imageUrl}
        height={500}
        width={500}
      />
    </picture>
  </header>

  <WebpConverterComponent />
  <!-- How it works section -->
  <HowItWorksSection
    title={howItWorksSection.title}
    steps={howItWorksSection.steps}
    lastStepDescription={howItWorksSection.lastStepDescription}
  />
  <!-- Cta section -->
  <!-- Lead magnet (waarde‑first) Download: “Afbeeldingen‑optimalisatie Cheat Sheet (1
  A4)” of “Automations voor beeldcompressie (CLI/Workflow)”. Form: voornaam + e‑mail.
  Belofte: praktische stappen + tools + drempels voorkomen. -->
  <CtaSection
    title={ctaSection.title}
    description={ctaSection.description}
    contactBtn={ctaSection.contactBtn}
  />

  <!-- Optimal image size section -->
  <OptimalImageSection optimalImageSizesSection={optimalImageSizesSection} />

  <!-- Before and After Section -->
  <BeforeAndAfterSection
    afterImage={beforeAndAfterSection.afterImage}
    beforeImage={beforeAndAfterSection.beforeImage}
    compareImage={beforeAndAfterSection.compareImage}
    description={beforeAndAfterSection.description}
    title={beforeAndAfterSection.title}
  />

  <!-- Lead magnet: mockup van 1‑pager PDF/e‑book. Beschrijf inhoud in 3 bullets. -->
  <!-- Cta Section -->
  <CtaSection
    title={secondCtaSection.title}
    description={secondCtaSection.description}
    contactBtn={secondCtaSection.contactBtn}
  />

  <!-- Gerelateerde resources / cross‑sell Kaarten naar SERP preview tool, blog
  ‘Website optimalisatie’, handleiding alt‑teksten. -->

  <!-- Faq Section -->
  <FaqSection faqSection={faqSection} />

  <!-- Final Cta Section -->
  <FinalCtaSection callToActionSection={callToActionSection} />

  <!-- Other tools section -->
  <Footer />
</Layout>

<style>
  header {
    align-items: center;
    display: flex;
    gap: var(--size-3);
    justify-content: space-between;
    padding-block: var(--size-10) var(--size-5);
    position: relative;

    .hero-copy {
      flex-grow: 1;
      width: 60%;

      span {
        font-size: var(--size-2);
      }

      h1 {
        margin-block: var(--size-2);
      }

      .hero-copy {
        display: grid;
        gap: var(--size-1);
        width: 100%;
      }
    }

    .converter-tool-hero-image {
      align-items: center;
      border-radius: var(--border-radius-img);
      box-shadow: var(--box-shadow);
      display: flex;
      flex-shrink: 0;
      height: auto;
      justify-content: center;
      max-width: 100%;
      overflow: hidden;
      width: 40%;
    }
  }

  @media (width >= 870px) {
    header {
      padding-block: 16rem var(--size-1);
    }
  }

  @media (width >= 984px) {
    header {
      .hero-copy {
        div {
          width: 80%;
        }
      }
    }
  }
</style>
