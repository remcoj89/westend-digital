---
import Layout from "../../layouts/Layout.astro";
import pageData from "../../data/imageToWebpConverter.json";
import WebpConverterComponent from "../../components/WebpConverter.astro";

const {
  metaTitle,
  metaDescription,
  ogImage,
  ogUrl,
  heroTitle,
  heroSubtitle,
  heroImage,
  howItWorksSection,
  optimalImageSizesSection,
} = pageData.pageContent;
---

<Layout
  title={metaTitle}
  description={metaDescription}
  ogTitle={metaTitle}
  ogDescription={metaDescription}
  ogImageUrl={ogImage.ogImageUrl}
  ogImageAlt={ogImage.ogImageAlt}
  ogUrl={ogUrl}
>
  <header class="wrapper">
    <div class="hero-copy">
      <h1 class="margin-bottom-1">
        {heroTitle}
      </h1>
      <p class="margin-bottom-2">
        {heroSubtitle}
      </p>
    </div>
    <picture class="converter-tool-hero-image">
      <img alt={heroImage.altText} src={heroImage.imageUrl} />
    </picture>
  </header>

  <WebpConverterComponent />
<!-- How it works section -->
  <section class="wrapper how-it-works-section">
    <h2>{howItWorksSection.title}</h2>
    <article>
      <div class="how-it-works-steps">
        {
          howItWorksSection.steps.map((step, i) => (
            <div class="card">
              <h3>{i + 1}</h3>
              <p set:html={step.title} />
              {/* <p set:html={step.description} /> */}
            </div>
          ))
        }
      </div>
      <p
        id="lastDescription"
        set:html={howItWorksSection.lastStepDescription}
      />
    </article>
  </section>
  <!-- Cta section -->


  <!-- Optimal image size section -->
  <section class="wrapper optimal-image-size-section">
    <div>
      <h2 set:html={optimalImageSizesSection.title} />
      <article>
        <p set:html={optimalImageSizesSection.description} />
        <ul>
          {
            optimalImageSizesSection.imageSizes.map((size) => (
              <li set:html={size} />
            ))
          }
        </ul>

        <table>
          <tr>
            {
              optimalImageSizesSection.optimalImageSizesTable.headers.map(
                (header) => <th set:html={header} />
              )
            }
          </tr>
          <tbody>
            {
              optimalImageSizesSection.optimalImageSizesTable.rows.map(
                (row) => (
                  <tr>
                    <td set:html={row.type} />
                    <td set:html={row.desktop} />
                    <td set:html={row.mobile} />
                    <td set:html={row.aspect_ratio} />
                  </tr>
                )
              )
            }
          </tbody>
        </table>
        {
          optimalImageSizesSection.lastDescription.map((paragraph) => (
            <p set:html={paragraph} />
          ))
        }
      </article>
    </div>
  </section>

  <!-- Cta Section -->

  <!-- Faq Section -->

  <!-- Cta Section -->

  <!-- Other tools section -->

  <!-- Json Structured data marukup -->
</Layout>

<style>
  header {
    align-items: center;
    display: flex;
    gap: var(--size-3);
    justify-content: space-between;
    padding-block: var(--size-10) var(--size-5);
    position: relative;

    .hero-copy {
      flex-grow: 1;
      width: 60%;

      span {
        font-size: var(--size-2);
      }

      h1 {
        margin-block: var(--size-2);
      }

      div {
        display: grid;
        gap: var(--size-1);
        width: 100%;
      }
    }

    .converter-tool-hero-image {
      align-items: center;
      border-radius: var(--border-radius-img);
      box-shadow: var(--box-shadow);
      display: flex;
      flex-shrink: 0;
      height: auto;
      justify-content: center;
      max-width: 100%;
      overflow: hidden;
      width: 40%;
    }
  }

  .how-it-works-section {
    display: grid;
    gap: var(--size-3);
    margin-block: var(--size-5);
    padding: var(--size-5) 0;
    h2 {
      text-align: center;
      margin-bottom: var(--size-3);
    }

    article {
      margin: 0 auto;
      width: 100%;
      h3 {
        margin-bottom: var(--size-2);
      }

      .how-it-works-steps {
        display: grid;
        gap: var(--size-3);
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        width: 100%;

        .card {
          background-color: var(--clr-primary-100);
          border-radius: var(--border-radius-card);
          box-shadow: var(--box-shadow);
          padding: var(--size-1);
          width: 100%;

          h3 {
            font-size: var(--size-4);
            margin-bottom: var(--size-1);
          }

          p {
            margin-block-end: var(--size-2);
          }
        }
      }
      #lastDescription {
        margin-block-start: var(--size-2);
      }
    }
  }

  .optimal-image-size-section {
    display: grid;
    div {
      h2 {
        margin-block-end: var(--size-3);
      }

      article {
        display: grid;
        gap: var(--size-3);

        ul {
          margin-inline-start: var(--size-2);
        }
      }
    }

    table,
    th,
    td {
      border: 1px solid black;
      border-collapse: collapse;
    }

    th,
    td {
      padding: 0.5rem 1rem;
    }
  }

  @media (width >= 870px) {
    header {
      padding-block: 16rem var(--size-1);
    }
  }

  @media (width >= 984px) {
    header {
      .hero-copy {
        div {
          width: 80%;
        }
      }
    }
  }
</style>
