---

---

<form id="contactForm" method="POST" action="/api/contactform">
  <div>
    <label for="name">Your Name: *</label>
    <input type="text" id="name" name="name" required />
  </div>

  <div>
    <label for="email">Your Email: *</label>
    <input type="email" id="email" name="email" required />
  </div>

  <div>
    <label for="subject">Subject: *</label>
    <input type="text" id="subject" name="subject" required />
  </div>

  <div>
    <label for="message">Message: *</label>
    <textarea id="message" name="message" rows="4" required></textarea>
  </div>

  <!-- reCAPTCHA token -->
  <input type="hidden" name="recaptchaToken" id="recaptchaToken" />

  <!-- honeypot -->
  <input
    type="text"
    name="company"
    tabindex="-1"
    autocomplete="off"
    style="display:none"
  />

  <input type="submit" value="Send" />
</form>

<script
  src=`https://www.google.com/recaptcha/api.js?render=${import.meta.env.PUBLIC_RECAPTCHA_SITE_KEY}`
  async
  defer></script>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("contactForm");
    if (!form) return;

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      console.log("form send")

      if (!window.grecaptcha) return;

      grecaptcha.ready(async () => {
        const token = await grecaptcha.execute(
          import.meta.env.PUBLIC_RECAPTCHA_SITE_KEY,
          { action: "contact_form" }
        );

        document.getElementById("recaptchaToken").value = token;
        form.submit();
      });
    });
  });
</script>
