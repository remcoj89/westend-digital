---
// Astro components
import Image from "astro/components/Image.astro";
import { Key } from "react";

// Data via props
const { content, sectionId } = Astro.props;
---

<section class="hidden" id={sectionId}>
  <div class="wrapper">
    <h2>{content.title}</h2>
    <div class="steps">
      {
        content.steps.map((step: any, i: number) => (
          <div>
            <span>{i + 1}</span>
            <h3>{step.title}</h3>
            <p>{step.text}</p>
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  section {
    background-color: var(--clr-primary-500);
    padding-block: var(--size-8);

    .wrapper {
      color: var(--clr-primary-100);
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: var(--size-3);

      h2 {
        color: inherit;
      }

      .steps {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        width: 100%;

        div {
          align-items: center;
          align-self: stretch;
          display: flex;
          flex-basis: 100%;
          flex-direction: column;
          justify-content: center;
          padding-inline: var(--size-1);
          position: relative;
          text-align: center;
          z-index: 2;

          span {
            --_box-size: var(--size-10);
            --_number-size: var(--size-4);

            background-color: var(--clr-secondary-900);
            border-radius: var(--border-radius-full);
            color: var(--clr-primary-100);
            display: inline-block;
            font-size: var(--_number-size);
            font-weight: var(--fw-bold);
            height: var(--_box-size);
            place-content: center;
            text-align: center;
            width: var(--_box-size);
            z-index: 2;
          }

          h3 {
            color: inherit;
            height: calc((var(--fs-600) * 2) * 1.5);
            margin-block: var(--size-2);
          }

          p {
            text-wrap: wrap;
          }
        }
      }

      @media (width >= 530px) {
        .steps {
          div {
            flex-basis: 50%;
            justify-content: flex-start;

            span {
              --_box-size: var(--size-8);
              --_number-size: var(--size-4);
            }

            &::after {
              background-color: var(--clr-secondary-900);
              content: "";
              height: 0.5rem;
              position: absolute;
              top: 4.4rem;
              z-index: 0;
            }

            &:first-child::after {
              left: 50%;
              right: 0;
            }

            &:nth-child(2)::after {
              left: 0;
              right: 50%;
            }

            &:nth-child(3)::after {
              left: 50%;
              right: 0;
            }

            &:last-child::after {
              left: 0;
              right: 50%;
            }
          }
        }
      }

      @media (width >= 900px) {
        .steps {
          div {
            flex-basis: 25%;
            width: 100%;

            span {
              --_box-size: var(--size-10);
              --_number-size: var(--size-5);
            }

            &:first-child::after {
              left: 50%;
              right: 0;
            }

            &:last-child::after {
              left: 0;
              right: 50%;
            }

            &:not(:first-child):not(:last-child)::after {
              inset-inline: 0;
            }
          }
        }
      }
    }
  }
</style>
